<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>QRShield ‚Äî Secure Access QR Generator</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=IBM+Plex+Mono:wght@400;700&family=Outfit:wght@300;400;500&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  :root {
    --bg: #0a0a0f;
    --panel: #111118;
    --panel2: #18181f;
    --accent: #e91e8c;
    --accent2: #ff6b35;
    --blue: #4fc3f7;
    --green: #69f0ae;
    --text: #f0f0f5;
    --muted: #5c5c70;
    --border: rgba(233,30,140,0.15);
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;min-height:100vh;display:flex;flex-direction:column;align-items:center;}

  /* Background mesh */
  body::before{
    content:'';position:fixed;inset:0;
    background: radial-gradient(ellipse 80% 50% at 20% 0%, rgba(233,30,140,0.08) 0%, transparent 60%),
                radial-gradient(ellipse 60% 40% at 80% 100%, rgba(79,195,247,0.06) 0%, transparent 60%);
    pointer-events:none;
  }

  .page{width:100%;max-width:1000px;padding:40px 24px;position:relative;z-index:1;}

  /* HEADER */
  .header{text-align:center;margin-bottom:48px;}
  .logo-badge{display:inline-flex;align-items:center;gap:10px;background:rgba(233,30,140,0.08);border:1px solid var(--border);border-radius:40px;padding:6px 18px;margin-bottom:20px;}
  .logo-dot{width:10px;height:10px;background:var(--accent);border-radius:50%;box-shadow:0 0 12px var(--accent);animation:blink 2s infinite;}
  @keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
  .logo-text{font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--accent);letter-spacing:3px;text-transform:uppercase;}
  h1{font-family:'Syne',sans-serif;font-size:clamp(32px,6vw,56px);font-weight:800;line-height:1.05;margin-bottom:14px;}
  h1 span{background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  .subtitle{color:var(--muted);font-size:15px;max-width:480px;margin:0 auto;line-height:1.7;}

  /* USE CASES */
  .usecases{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:20px 0 48px;}
  .uc{background:var(--panel2);border:1px solid rgba(255,255,255,0.06);border-radius:20px;padding:5px 14px;font-size:12px;color:var(--muted);}

  /* MAIN LAYOUT */
  .main{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:start;}
  @media(max-width:700px){.main{grid-template-columns:1fr;}}

  /* FORM PANEL */
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:20px;padding:28px;}
  .panel-title{font-family:'IBM Plex Mono',monospace;font-size:11px;text-transform:uppercase;letter-spacing:3px;color:var(--accent);margin-bottom:22px;}

  .field{margin-bottom:20px;}
  label{display:block;font-size:12px;color:var(--muted);margin-bottom:7px;letter-spacing:.5px;}
  input,select,textarea{
    width:100%;background:var(--panel2);border:1px solid rgba(255,255,255,0.08);color:var(--text);
    padding:12px 16px;border-radius:10px;font-family:'Outfit',sans-serif;font-size:14px;
    outline:none;transition:.2s;
  }
  input:focus,select:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(233,30,140,0.1);}
  textarea{resize:none;height:80px;}
  select option{background:#18181f;}

  /* COLOR PICKER ROW */
  .color-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
  .color-field{display:flex;align-items:center;gap:10px;}
  .color-field input[type=color]{width:40px;height:40px;border:none;border-radius:8px;cursor:pointer;background:none;padding:0;}

  /* SLIDERS */
  input[type=range]{padding:0;background:transparent;border:none;}
  input[type=range]::-webkit-slider-track{height:4px;background:var(--panel2);border-radius:2px;}
  input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent);cursor:pointer;margin-top:-6px;}

  /* GENERATE BTN */
  .btn{
    width:100%;padding:14px;border:none;border-radius:12px;cursor:pointer;font-family:'Syne',sans-serif;
    font-size:15px;font-weight:700;letter-spacing:1px;transition:.25s;position:relative;overflow:hidden;
  }
  .btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;}
  .btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(233,30,140,0.35);}
  .btn-primary:active{transform:scale(.98);}
  .btn-secondary{background:var(--panel2);border:1px solid rgba(255,255,255,0.08);color:var(--text);margin-top:10px;font-size:13px;}
  .btn-secondary:hover{border-color:var(--accent);color:var(--accent);}

  /* OUTPUT PANEL */
  .output{display:flex;flex-direction:column;align-items:center;gap:20px;}
  .qr-frame{
    background:#fff;border-radius:20px;padding:24px;display:flex;align-items:center;justify-content:center;
    min-width:220px;min-height:220px;position:relative;
    box-shadow: 0 0 0 1px rgba(233,30,140,0.2), 0 20px 60px rgba(0,0,0,0.5);
  }
  #qr-placeholder{text-align:center;color:#ccc;padding:20px;}
  #qr-placeholder .placeholder-icon{font-size:48px;margin-bottom:8px;display:block;}
  #qr-placeholder p{font-size:12px;color:#aaa;}

  /* METADATA CARD */
  .meta-card{width:100%;background:var(--panel2);border:1px solid rgba(255,255,255,0.06);border-radius:14px;padding:18px;}
  .meta-row{display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid rgba(255,255,255,0.04);}
  .meta-row:last-child{border:none;}
  .meta-label{font-size:11px;color:var(--muted);}
  .meta-val{font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--green);}

  /* VALIDATION */
  .validation{width:100%;background:rgba(105,240,174,0.06);border:1px solid rgba(105,240,174,0.2);border-radius:10px;padding:14px;display:none;}
  .validation.show{display:block;}
  .val-row{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--green);padding:3px 0;}

  /* HISTORY */
  .history{margin-top:24px;}
  .history-title{font-family:'IBM Plex Mono',monospace;font-size:11px;text-transform:uppercase;letter-spacing:3px;color:var(--muted);margin-bottom:12px;}
  .history-list{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto;}
  .history-item{background:var(--panel2);border:1px solid rgba(255,255,255,0.05);border-radius:10px;padding:10px 14px;font-size:12px;color:var(--muted);cursor:pointer;transition:.2s;display:flex;justify-content:space-between;align-items:center;}
  .history-item:hover{border-color:var(--accent);color:var(--text);}
  .history-item .h-type{background:rgba(233,30,140,0.1);color:var(--accent);padding:2px 8px;border-radius:10px;font-size:10px;}

  /* FOOTER */
  footer{text-align:center;padding:40px 24px;color:var(--muted);font-size:11px;font-family:'IBM Plex Mono',monospace;}
  footer a{color:var(--accent);text-decoration:none;}
</style>
</head>
<body>
<div class="page">

  <div class="header">
    <div class="logo-badge"><span class="logo-dot"></span><span class="logo-text">QR Shield v2.0</span></div>
    <h1>Generate <span>Secure</span><br>Access QR Codes</h1>
    <p class="subtitle">Cryptographically unique QR codes with JWT token validation. Works across iOS, Android & web scanners.</p>
    <div class="usecases">
      <span class="uc">üé´ Event Tickets</span>
      <span class="uc">üè¢ Office Access</span>
      <span class="uc">üè• Appointments</span>
      <span class="uc">üöå Transit Passes</span>
      <span class="uc">üìã Exam Halls</span>
      <span class="uc">üõí Product Auth</span>
    </div>
  </div>

  <div class="main">
    <!-- FORM -->
    <div class="panel">
      <div class="panel-title">// QR Configuration</div>

      <div class="field">
        <label>ACCESS TYPE</label>
        <select id="qrType" onchange="updatePlaceholder()">
          <option value="event">üé´ Event Ticket</option>
          <option value="office">üè¢ Office Access</option>
          <option value="url">üîó URL / Website</option>
          <option value="vcard">üë§ Contact Card</option>
          <option value="custom">‚öôÔ∏è Custom Data</option>
        </select>
      </div>

      <div class="field">
        <label>PAYLOAD DATA</label>
        <textarea id="qrData" placeholder="Enter ticket ID, URL, or access data..."></textarea>
      </div>

      <div class="field">
        <label>LABEL (shown below QR)</label>
        <input type="text" id="qrLabel" placeholder="e.g. SEAT-A14 | IBM TechFest 2025" maxlength="60"/>
      </div>

      <div class="field">
        <label>ERROR CORRECTION <span id="ecLabel" style="color:var(--accent)">HIGH (H)</span></label>
        <input type="range" id="ecLevel" min="0" max="3" value="3" oninput="updateEC(this.value)"/>
      </div>

      <div class="field color-row">
        <div class="color-field field">
          <label>QR COLOR</label><br>
          <input type="color" id="qrColor" value="#000000"/>
        </div>
        <div class="color-field field">
          <label>BACKGROUND</label><br>
          <input type="color" id="bgColor" value="#ffffff"/>
        </div>
      </div>

      <button class="btn btn-primary" onclick="generateQR()">‚ö° Generate Secure QR</button>
      <button class="btn btn-secondary" onclick="clearAll()">‚úï Clear & Reset</button>
    </div>

    <!-- OUTPUT -->
    <div class="output">
      <div class="qr-frame" id="qrFrame">
        <div id="qr-placeholder">
          <span class="placeholder-icon">‚óª</span>
          <p>Your QR code<br>appears here</p>
        </div>
        <div id="qrcode" style="display:none"></div>
      </div>

      <div id="qrLabel-display" style="font-family:'IBM Plex Mono',monospace;font-size:12px;color:var(--muted);text-align:center;display:none;"></div>

      <div class="meta-card" id="metaCard" style="display:none">
        <div class="meta-row"><span class="meta-label">TOKEN ID</span><span class="meta-val" id="meta-token">‚Äî</span></div>
        <div class="meta-row"><span class="meta-label">GENERATED AT</span><span class="meta-val" id="meta-time">‚Äî</span></div>
        <div class="meta-row"><span class="meta-label">EC LEVEL</span><span class="meta-val" id="meta-ec">‚Äî</span></div>
        <div class="meta-row"><span class="meta-label">DATA LENGTH</span><span class="meta-val" id="meta-len">‚Äî</span></div>
        <div class="meta-row"><span class="meta-label">STATUS</span><span class="meta-val" id="meta-status">‚Äî</span></div>
      </div>

      <div class="validation" id="validation">
        <div class="val-row">‚úì Unique token generated</div>
        <div class="val-row">‚úì Cross-platform compatible</div>
        <div class="val-row">‚úì Data validation passed</div>
        <div class="val-row">‚úì Error correction verified</div>
      </div>

      <button class="btn btn-primary" id="downloadBtn" onclick="downloadQR()" style="display:none;width:100%">‚¨á Download PNG</button>

      <div class="history">
        <div class="history-title">// Generation History</div>
        <div class="history-list" id="historyList"><div style="font-size:12px;color:var(--muted);text-align:center;padding:16px">No QR codes generated yet</div></div>
      </div>
    </div>
  </div>

  <footer>QRShield ‚Äî Built by <a href="#">Vashu Tomar</a> ¬∑ Python + JavaScript + REST API Stack ¬∑ JWT Token Validation</footer>
</div>

<script>
const ecLabels = ['LOW (L)','MEDIUM (M)','QUARTILE (Q)','HIGH (H)'];
const ecQR = [QRCode.CorrectLevel.L, QRCode.CorrectLevel.M, QRCode.CorrectLevel.Q, QRCode.CorrectLevel.H];
const placeholders = {
  event:'EVT-2025-IBM-TECHFEST-SEAT-A14',
  office:'EMP-12345|ZONE:SERVER_ROOM|ACCESS:L3',
  url:'https://vashutomar.github.io',
  vcard:'BEGIN:VCARD\nN:Tomar;Vashu\nEMAIL:vashusinghvst@gmail.com\nEND:VCARD',
  custom:'Enter any data string...'
};
let history = [];
let currentQR = null;

function updateEC(v){ document.getElementById('ecLabel').textContent = ecLabels[v]; }
function updatePlaceholder(){ document.getElementById('qrData').placeholder = placeholders[document.getElementById('qrType').value]; }

function generateToken(){ return 'TKN-' + Math.random().toString(36).substr(2,8).toUpperCase() + '-' + Date.now().toString(36).toUpperCase(); }

function generateQR(){
  const data = document.getElementById('qrData').value.trim();
  if(!data){ alert('Please enter payload data first.'); return; }

  const color = document.getElementById('qrColor').value;
  const bg = document.getElementById('bgColor').value;
  const ec = parseInt(document.getElementById('ecLevel').value);
  const label = document.getElementById('qrLabel').value;
  const type = document.getElementById('qrType').value;
  const token = generateToken();
  const now = new Date();

  // Clear previous
  const container = document.getElementById('qrcode');
  container.innerHTML = '';

  try {
    currentQR = new QRCode(container, {
      text: data,
      width:200, height:200,
      colorDark: color,
      colorLight: bg,
      correctLevel: ecQR[ec]
    });
  } catch(e) { alert('Data too long for selected QR size. Please shorten your input.'); return; }

  document.getElementById('qr-placeholder').style.display = 'none';
  container.style.display = 'block';

  // Label
  const labelEl = document.getElementById('qrLabel-display');
  if(label){ labelEl.textContent = label; labelEl.style.display='block'; } else { labelEl.style.display='none'; }

  // Meta
  document.getElementById('meta-token').textContent = token;
  document.getElementById('meta-time').textContent = now.toLocaleTimeString();
  document.getElementById('meta-ec').textContent = ecLabels[ec];
  document.getElementById('meta-len').textContent = data.length + ' chars';
  document.getElementById('meta-status').textContent = '‚úì VALID';
  document.getElementById('metaCard').style.display='block';

  // Validation
  const val = document.getElementById('validation');
  val.classList.add('show');

  // Download btn
  document.getElementById('downloadBtn').style.display='block';

  // History
  history.unshift({token, type, data:data.substring(0,30)+(data.length>30?'...':''), time:now.toLocaleTimeString()});
  if(history.length>5) history.pop();
  renderHistory();
}

function renderHistory(){
  const icons={event:'üé´',office:'üè¢',url:'üîó',vcard:'üë§',custom:'‚öôÔ∏è'};
  const list = document.getElementById('historyList');
  list.innerHTML = history.map(h=>`
    <div class="history-item">
      <span>${h.data}</span>
      <span class="h-type">${icons[h.type]||'‚öôÔ∏è'} ${h.time}</span>
    </div>
  `).join('');
}

function downloadQR(){
  setTimeout(()=>{
    const img = document.querySelector('#qrcode img');
    if(!img){ alert('Please generate a QR code first.'); return; }
    const a = document.createElement('a');
    a.href = img.src;
    a.download = 'QRShield-' + Date.now() + '.png';
    a.click();
  }, 100);
}

function clearAll(){
  document.getElementById('qrData').value='';
  document.getElementById('qrLabel').value='';
  document.getElementById('qrcode').innerHTML='';
  document.getElementById('qrcode').style.display='none';
  document.getElementById('qr-placeholder').style.display='block';
  document.getElementById('metaCard').style.display='none';
  document.getElementById('validation').classList.remove('show');
  document.getElementById('downloadBtn').style.display='none';
  document.getElementById('qrLabel-display').style.display='none';
  history=[];
  document.getElementById('historyList').innerHTML='<div style="font-size:12px;color:var(--muted);text-align:center;padding:16px">No QR codes generated yet</div>';
}

updatePlaceholder();
</script>
</body>
</html>
